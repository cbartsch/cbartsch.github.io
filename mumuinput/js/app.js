"use strict";requirejs(["controller","settingsDialog","utils","constants"],function(e,n,t,o){function i(e){document.getElementById("status").setAttribute("class",e)}function d(){var e=document.getElementById("portrait-warning");c.isInputDisabled()?t.addClass(e,o.INPUT_DISABLED_CLASS):t.removeClass(e,o.INPUT_DISABLED_CLASS)}var c=new e;c.onConnect=function(){i("connected")},c.onDisconnect=function(){i("disconnected")},c.onMessage=function(e){e.hasOwnProperty("deathCounter")&&(document.getElementById("deaths").innerHTML=e.deathCounter),e.hasOwnProperty("timer")&&(document.getElementById("timer").innerHTML=e.timer)},c.onError=function(e){console.error("Error during connection:",e),i("error")},document.getElementById("method").innerHTML=c.getAxisMethod(),document.getElementById("connect").addEventListener("click",function(){t.requestFullscreen(document.body),c.disconnect(),c.connect(t.getCookie(o.HOST_NAME_COOKIE,o.DEFAULT_HOST),t.getCookie(o.USER_NAME_COOKIE,o.DEFAULT_USER_NAME))}),document.getElementById("settings").addEventListener("click",function(){t.removeClass(document.getElementById("settings-dialog"),o.HIDDEN_CLASS)}),document.getElementById("ping").addEventListener("click",function(){c.sendMessage(JSON.stringify({type:o.MESSAGE_TYPE_PING}))}),c.addAction(document.getElementById("thrust")),c.addAction(document.getElementById("break")),n.init(),window.setInterval(c.sendInput,o.UPDATE_RATE),window.addEventListener("orientationchange",d),t.lockLandscapeOrientation()});