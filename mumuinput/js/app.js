"use strict";requirejs(["controller","settingsDialog","utils","constants"],function(e,t,n,o){function i(e){document.getElementById("status").setAttribute("class",e)}function d(){var e=document.getElementById("portrait-warning");c.isInputDisabled()?n.addClass(e,o.INPUT_DISABLED_CLASS):n.removeClass(e,o.INPUT_DISABLED_CLASS)}var c=new e;if(c.onConnect=function(){i("connected")},c.onDisconnect=function(){i("disconnected")},c.onMessage=function(e){"deathCounter"in e&&(document.getElementById("deaths").innerHTML=e.deathCounter),"timer"in e&&(document.getElementById("timer").innerHTML=e.timer)},c.onError=function(e){console.error("Error during connection:",e),i("error")},document.getElementById("method").innerHTML=c.getAxisMethod(),document.getElementById("connect").addEventListener("click",function(){n.requestFullscreen(document.body),c.disconnect();var e=o.HOST_STRING_TEMPLATE.replace("{0}",n.getCookie(o.HOST_NAME_COOKIE,o.DEFAULT_HOST));c.connect(e,n.getCookie(o.USER_NAME_COOKIE,o.DEFAULT_USER_NAME))}),document.getElementById("settings").addEventListener("click",function(){n.removeClass(document.getElementById("settings-dialog"),o.HIDDEN_CLASS)}),document.getElementById("ping").addEventListener("click",function(){c.sendMessage(JSON.stringify({type:o.MESSAGE_TYPE_PING}))}),c.addAction(document.getElementById("thrust")),c.addAction(document.getElementById("break")),o.TOUCH_CONTROL){var s=document.getElementById("thrust");s.addEventListener("mousemove",function(e){var t=e.offsetX,n=t/s.offsetWidth*2-1;c.setAxis(n)})}t.init(),window.setInterval(c.sendInput,o.UPDATE_RATE),window.addEventListener("orientationchange",d),n.lockLandscapeOrientation()});