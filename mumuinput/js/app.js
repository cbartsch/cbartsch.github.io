"use strict";requirejs(["controller","settingsDialog","utils","constants"],function(e,n,t,o){function i(e){document.getElementById("status").setAttribute("class",e)}function c(){var e=document.getElementById("portrait-warning");d.isInputDisabled()?t.addClass(e,o.INPUT_DISABLED_CLASS):t.removeClass(e,o.INPUT_DISABLED_CLASS)}var d=new e;d.onConnect=function(){i("connected")},d.onDisconnect=function(){i("disconnected")},d.onMessage=function(e){"deathCounter"in e&&(document.getElementById("deaths").innerHTML=e.deathCounter),"timer"in e&&(document.getElementById("timer").innerHTML=e.timer)},d.onError=function(e){console.error("Error during connection:",e),i("error")},document.getElementById("method").innerHTML=d.getAxisMethod(),document.getElementById("connect").addEventListener("click",function(){t.requestFullscreen(document.body),d.disconnect();var e=o.HOST_STRING_TEMPLATE.replace("{0}",t.getCookie(o.HOST_NAME_COOKIE,o.DEFAULT_HOST));d.connect(e,t.getCookie(o.USER_NAME_COOKIE,o.DEFAULT_USER_NAME))}),document.getElementById("settings").addEventListener("click",function(){t.removeClass(document.getElementById("settings-dialog"),o.HIDDEN_CLASS)}),document.getElementById("ping").addEventListener("click",function(){d.sendMessage(JSON.stringify({type:o.MESSAGE_TYPE_PING}))}),d.addAction(document.getElementById("thrust")),d.addAction(document.getElementById("break")),n.init(),window.setInterval(d.sendInput,o.UPDATE_RATE),window.addEventListener("orientationchange",c),t.lockLandscapeOrientation()});