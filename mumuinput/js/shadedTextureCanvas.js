"use strict";define(["utils","constants"],function(t,e){return function(e){var r,o,i,n,a,u,R,T,E,A,f,_=this;_.redSubstitutionColor=[1,0,0,1],_.greenSubstitutionColor=[0,1,0,1],_.blueSubstitutionColor=[0,0,1,1],_.setImage=function(t){r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)},_.draw=function(){r.clear(r.COLOR_BUFFER_BIT),r.useProgram(o),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a),r.uniform1i(T,0),r.uniform4fv(E,_.redSubstitutionColor),r.uniform4fv(A,_.greenSubstitutionColor),r.uniform4fv(f,_.blueSubstitutionColor),r.bindBuffer(r.ARRAY_BUFFER,i),r.vertexAttribPointer(u,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(R,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLE_STRIP,0,4)},function(){if(r=t.initWebGL(e)){r.clearColor(0,0,0,0),o=t.loadShaderProgram(r,"replace-color-vertex","replace-color-fragment"),u=r.getAttribLocation(o,"vertexPosition"),r.enableVertexAttribArray(u),R=r.getAttribLocation(o,"texturePosition"),r.enableVertexAttribArray(R),E=r.getUniformLocation(o,"redSubstituteColor"),A=r.getUniformLocation(o,"greenSubstituteColor"),f=r.getUniformLocation(o,"blueSubstituteColor"),T=r.getUniformLocation(o,"texture"),a=r.createTexture(),i=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,i);var _=[1,1,0,-1,1,0,1,-1,0,-1,-1,0];r.bufferData(r.ARRAY_BUFFER,new Float32Array(_),r.STATIC_DRAW),n=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,n);var b=[1,0,0,0,1,1,0,1];r.bufferData(r.ARRAY_BUFFER,new Float32Array(b),r.STATIC_DRAW)}}()}});